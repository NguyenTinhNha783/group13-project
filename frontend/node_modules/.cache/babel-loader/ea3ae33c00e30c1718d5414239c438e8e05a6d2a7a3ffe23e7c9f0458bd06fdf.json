{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vinht\\\\group13-project\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport Signup from \"./component/Signup.jsx\";\nimport Login from \"./component/Login.jsx\";\nimport Profile from \"./component/Profile.jsx\";\nimport Admin from \"./component/Admin.jsx\";\nimport EditProfile from \"./component/EditProfile.jsx\";\nimport ChangePassword from \"./component/ChangePassword.jsx\";\nimport api from \"./axiosConfig\"; // axiosConfig đã có baseURL = http://localhost:3000/api\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppWrapper() {\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n}\n_c = AppWrapper;\nfunction App() {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // ✅ Kiểm tra đăng nhập bằng /users/profile (backend có route này)\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setIsLoggedIn(false);\n          setIsLoading(false);\n          return;\n        }\n        const response = await api.get(\"/profile\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data && response.data.email) {\n          setIsLoggedIn(true);\n          localStorage.setItem(\"isLoggedIn\", \"true\");\n        } else {\n          setIsLoggedIn(false);\n          localStorage.removeItem(\"isLoggedIn\");\n        }\n      } catch (err) {\n        console.warn(\"Auth check failed:\", err.message);\n        setIsLoggedIn(false);\n        localStorage.removeItem(\"isLoggedIn\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAuth();\n  }, []);\n\n  // ✅ Khi đăng nhập thành công (từ Login.jsx gọi)\n  const handleLogin = () => {\n    setIsLoggedIn(true);\n    localStorage.setItem(\"isLoggedIn\", \"true\");\n  };\n\n  // ✅ Xử lý đăng xuất\n  const handleLogout = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await api.post(\"/logout\", {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (err) {\n      console.error(\"Logout failed:\", err.message);\n    } finally {\n      setIsLoggedIn(false);\n      localStorage.removeItem(\"isLoggedIn\");\n      localStorage.removeItem(\"token\");\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"100px\"\n      },\n      children: \"\\u0110ang ki\\u1EC3m tra \\u0111\\u0103ng nh\\u1EADp...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/\",\n      element: /*#__PURE__*/_jsxDEV(Login, {\n        onLogin: handleLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/signup\",\n      element: /*#__PURE__*/_jsxDEV(Signup, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/profile\",\n      element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Profile, {\n        onLogout: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 77\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/edit-profile\",\n      element: isLoggedIn ? /*#__PURE__*/_jsxDEV(EditProfile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 57\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/change-password\",\n      element: isLoggedIn ? /*#__PURE__*/_jsxDEV(ChangePassword, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/admin\",\n      element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Admin, {\n        onLogout: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 75\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"*\",\n      element: /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"SiOCXgNumxE/IMcj0wlupJIS2jg=\");\n_c2 = App;\nexport default AppWrapper;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppWrapper\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Signup","Login","Profile","Admin","EditProfile","ChangePassword","api","jsxDEV","_jsxDEV","AppWrapper","children","App","fileName","_jsxFileName","lineNumber","columnNumber","_c","_s","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","checkAuth","token","localStorage","getItem","response","get","headers","Authorization","data","email","setItem","removeItem","err","console","warn","message","handleLogin","handleLogout","post","error","style","textAlign","marginTop","path","element","onLogin","onLogout","to","_c2","$RefreshReg$"],"sources":["C:/Users/vinht/group13-project/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport Signup from \"./component/Signup.jsx\";\r\nimport Login from \"./component/Login.jsx\";\r\nimport Profile from \"./component/Profile.jsx\";\r\nimport Admin from \"./component/Admin.jsx\";\r\nimport EditProfile from \"./component/EditProfile.jsx\";\r\nimport ChangePassword from \"./component/ChangePassword.jsx\";\r\nimport api from \"./axiosConfig\"; // axiosConfig đã có baseURL = http://localhost:3000/api\r\n\r\nfunction AppWrapper() {\r\n  return (\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // ✅ Kiểm tra đăng nhập bằng /users/profile (backend có route này)\r\n    useEffect(() => {\r\n        const checkAuth = async () => {\r\n            try {\r\n                const token = localStorage.getItem(\"token\");\r\n                if (!token) {\r\n                    setIsLoggedIn(false);\r\n                    setIsLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const response = await api.get(\"/profile\", {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n\r\n                if (response.data && response.data.email) {\r\n                    setIsLoggedIn(true);\r\n                    localStorage.setItem(\"isLoggedIn\", \"true\");\r\n                } else {\r\n                    setIsLoggedIn(false);\r\n                    localStorage.removeItem(\"isLoggedIn\");\r\n                }\r\n            } catch (err) {\r\n                console.warn(\"Auth check failed:\", err.message);\r\n                setIsLoggedIn(false);\r\n                localStorage.removeItem(\"isLoggedIn\");\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        checkAuth();\r\n    }, []);\r\n\r\n    // ✅ Khi đăng nhập thành công (từ Login.jsx gọi)\r\n    const handleLogin = () => {\r\n        setIsLoggedIn(true);\r\n        localStorage.setItem(\"isLoggedIn\", \"true\");\r\n    };\r\n\r\n    // ✅ Xử lý đăng xuất\r\n    const handleLogout = async () => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            await api.post(\"/logout\", {}, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Logout failed:\", err.message);\r\n        } finally {\r\n            setIsLoggedIn(false);\r\n            localStorage.removeItem(\"isLoggedIn\");\r\n            localStorage.removeItem(\"token\");\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return <div style={{ textAlign: \"center\", marginTop: \"100px\" }}>Đang kiểm tra đăng nhập...</div>;\r\n    }\r\n\r\n    return (\r\n        <Routes>\r\n            {/* Trang đăng nhập */}\r\n            <Route path=\"/\" element={<Login onLogin={handleLogin} />} />\r\n\r\n            {/* Trang đăng ký */}\r\n            <Route path=\"/signup\" element={<Signup />} />\r\n\r\n            {/* Hồ sơ người dùng */}\r\n            <Route\r\n                path=\"/profile\"\r\n                element={isLoggedIn ? <Profile onLogout={handleLogout} /> : <Navigate to=\"/\" />}\r\n            />\r\n\r\n            {/* Chỉnh sửa hồ sơ */}\r\n            <Route\r\n                path=\"/edit-profile\"\r\n                element={isLoggedIn ? <EditProfile /> : <Navigate to=\"/\" />}\r\n            />\r\n\r\n            {/* Đổi mật khẩu */}\r\n            <Route\r\n                path=\"/change-password\"\r\n                element={isLoggedIn ? <ChangePassword /> : <Navigate to=\"/\" />}\r\n            />\r\n\r\n            {/* Trang admin */}\r\n            <Route\r\n                path=\"/admin\"\r\n                element={isLoggedIn ? <Admin onLogout={handleLogout} /> : <Navigate to=\"/\" />}\r\n            />\r\n\r\n            {/* Tự động chuyển hướng nếu không khớp route */}\r\n            <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n        </Routes>\r\n    );\r\n}\r\n\r\nexport default AppWrapper;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}